{% extends 'main/base.html' %}
{% load crispy_forms_tags %}
{%load static%}
{% load humanize %}
{% block link %}
<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'main/base_style.css'%}">
<link rel="stylesheet" href="{% static 'main/home_style.css'%}">
<link rel="stylesheet" href="{% static 'post/post_style.css'%}">
<link rel="stylesheet" href="{% static 'users/profile_style.css'%}">
{% endblock %}


{% block content %}
<div class="profile-update-modal modal">
    <div class="profile-update-modal-content modal-content">
        <div class="profile-update-modal-close modal-close">+</div>
        <form method="POST" class="profile-update-form" enctype="multipart/form-data"
            action="{%url 'users:profile_update' profile.id%}" novalidate="">
            {% csrf_token %}
            {{update_form|crispy}}
            <button type="submit" class="profile-update-save-button btn btn-primary">Save</button>
        </form>
    </div>
</div>

<div class="profile">
    <div class="profile-info">
        <div class="profile-background-img"></div>
        <div class="main-profile-info">
            <img class="profile-profile-img" src="{{profile.profile_img.url}}" alt="profile_img">
            <div class="username">
                <p>{{profile.user.username}}</p>
                <p>{{profile.alias}}</p>
                <p>{{profile.name}}</p>
            </div>
            <button class="btn btn-success" href="{{profile.get_update_profile_url}}">Edit View</button>
            <button class='profile-update-modal-redirect btn btn-primary'>Edit</button>
        </div>
        <div>
            <p>Joined: {{profile.join_timestamp}}</p>
            <p>user id:{{profile.user.id}}</p>
            <p>profile id:{{profile.id}}</p>
            <p>{{profile.description}}</p>
            <p>{{profile.user.email}}</p>
            <p>Following: {{profile.following.count}}</p>
            <p>Followers: {{profile.followers_set.all.count}}</p>
        </div>
    </div>

    <div>
        <div class="posts text-white pt-2 mt-3"></div>
        {% for post in posts %}
        {% include 'post/post_template.html' with post=post user=user%}
    </div>
</div>
</a>
{% endfor %}
</div>
</div>
</div>
</div>

<script src="{% static 'users/profile_update.js' %}"></script>
{% endblock %}
{% block script%}

{% endblock %}